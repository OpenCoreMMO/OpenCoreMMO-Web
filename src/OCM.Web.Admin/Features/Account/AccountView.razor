@page "/accounts/{AccountId:int}"

<MudGrid>
    <!-- Characters Table -->
    <MudItem xs="12" md="8">
        <MudPaper>
            <div Class="pa-6">
                <MudText Typo="Typo.h6">Characters</MudText>
                <MudText Typo="Typo.subtitle2" Color="Color.Secondary">List of all characters on the account</MudText>
            </div>

            <MudTable Items="Characters" Dense="true" Hover="true" Class="mt-4">
                <HeaderContent>
                    <MudTh></MudTh>
                    <MudTh>Name</MudTh>
                    <MudTh>Level</MudTh>
                    <MudTh>Group</MudTh>
                    <MudTh>Status</MudTh>
                    <MudTh align="right">Action</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd>
                        <MudAvatar Size="Size.Medium" Image="@context.AvatarUrl"/>
                    </MudTd>
                    <MudTd>
                        <div>@context.Name</div>
                        <div class="text-sm text-secondary">@context.Vocation</div>
                    </MudTd>
                    <MudTd>@context.Level</MudTd>
                    <MudTd>@context.Group</MudTd>
                    <MudTd>
                        <MudChip T="string" Color="Color.Error" Variant="Variant.Filled" Size="Size.Small">Offline
                        </MudChip>
                    </MudTd>
                    <MudTd align="right">
                        <MudIconButton Icon="@Icons.Material.Filled.Visibility" Color="Color.Primary"/>
                    </MudTd>
                </RowTemplate>
            </MudTable>
        </MudPaper>
    </MudItem>

    <!-- Account Info -->
    <MudItem xs="12" md="4">
        <MudPaper Class="pa-6" Elevation="2">
            <MudText Typo="Typo.h6">Account Info</MudText>

            <MudTextField Label="Email" @bind-Value="Account.Email" ReadOnly="true" Class="mt-4"
                          Variant="Variant.Outlined"/>
            <MudTextField Label="Password" @bind-Value="Account.Password" InputType="InputType.Password"
                          Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.Visibility"
                          Variant="Variant.Outlined"/>

            <MudGrid Class="mt-2">
                <MudItem xs="6">
                    <MudSelect T="int" Label="Page Access" @bind-Value="Account.PageAccess" Variant="Variant.Outlined">
                        @for (var i = 0; i <= 5; i++)
                        {
                            <MudSelectItem Value="@i">@i</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6">
                    <MudSelect T="int" Label="Type" @bind-Value="Account.Type" Variant="Variant.Outlined">
                        @for (var i = 0; i <= 5; i++)
                        {
                            <MudSelectItem Value="@i">@i</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
            </MudGrid>

            <MudTextField Label="Premium Days" @bind-Value="Account.PremiumDays" Class="mt-4"
                          Variant="Variant.Outlined"/>
            <MudTextField Label="Coins" @bind-Value="Account.Coins" Variant="Variant.Outlined"/>

            <MudButton Class="mt-6" Variant="Variant.Filled" Color="Color.Primary" FullWidth="true"
                       OnClick="SaveChanges">
                Save editions
            </MudButton>
        </MudPaper>
    </MudItem>
</MudGrid>

@code {
    [Parameter] public int AccountId { get; set; }

    public class CharacterModel
    {
        public string Name { get; set; }
        public string Vocation { get; set; }
        public int Level { get; set; }
        public string Group { get; set; }
        public string AvatarUrl { get; set; } = "_content/MudBlazor.WebAssembly/images/avatars/avatar1.png"; // Placeholder
    }

    public class AccountModel
    {
        public string Email { get; set; }
        public string Password { get; set; }
        public int PageAccess { get; set; }
        public int Type { get; set; }
        public int PremiumDays { get; set; }
        public int Coins { get; set; }
    }

    private readonly List<CharacterModel> Characters = new()
    {
        new CharacterModel { Name = "Rook Test", Vocation = "Paladin", Level = 5, Group = "player" },
        new CharacterModel { Name = "MUNIZ", Vocation = "Sorcerer", Level = 50, Group = "player" },
        new CharacterModel { Name = "Druid Test", Vocation = "Druid", Level = 50, Group = "player" },
        new CharacterModel { Name = "Paladin Test", Vocation = "Paladin", Level = 8, Group = "player" },
        new CharacterModel { Name = "Knight Test", Vocation = "Knight", Level = 8, Group = "player" },
        new CharacterModel { Name = "GOD", Vocation = "None", Level = 10000, Group = "god" }
    };

    private readonly AccountModel Account = new()
    {
        Email = "god@mail.com",
        Password = "",
        PageAccess = 3,
        Type = 5,
        PremiumDays = 1000,
        Coins = 2000000
    };

    private void SaveChanges()
    {
        // Save logic here
    }

}
